# System Exploration Document

Generated: 2024-12-21 (Updated: 2024-12-21)

## Overview

This is a **shadcn-admin** dashboard application built with:
- **React 19** with **Vite**
- **TanStack Router** for routing
- **TanStack Query** for data fetching (not yet used - static data)
- **Zustand** for state management (auth store)
- **shadcn/ui** components with TailwindCSS

## Routes Overview

| Route URL | Route File | Component | Description |
|-----------|------------|-----------|-------------|
| `/` | `src/routes/_authenticated/index.tsx` | Dashboard | Dashboard with stats, charts, recent sales |
| `/tasks` | `src/routes/_authenticated/tasks/index.tsx` | Tasks | Task list with filtering, pagination |
| `/users` | `src/routes/_authenticated/users/index.tsx` | Users | User management with CRUD dialogs |
| `/apps` | `src/routes/_authenticated/apps/index.tsx` | Apps | App integrations list |
| `/chats` | `src/routes/_authenticated/chats/index.tsx` | Chats | Chat/messaging interface |
| `/settings` | `src/routes/_authenticated/settings/index.tsx` | Settings | Settings overview |
| `/settings/account` | `src/routes/_authenticated/settings/account.tsx` | AccountSettings | Account settings |
| `/settings/appearance` | `src/routes/_authenticated/settings/appearance.tsx` | AppearanceSettings | Theme settings |
| `/settings/notifications` | `src/routes/_authenticated/settings/notifications.tsx` | NotificationSettings | Notification preferences |
| `/settings/display` | `src/routes/_authenticated/settings/display.tsx` | DisplaySettings | Display settings |
| `/help-center` | `src/routes/_authenticated/help-center/index.tsx` | HelpCenter | Help documentation |
| `/sign-in` | `src/routes/(auth)/sign-in.tsx` | SignIn | Authentication form |
| `/sign-up` | `src/routes/(auth)/sign-up.tsx` | SignUp | Registration form |
| `/forgot-password` | `src/routes/(auth)/forgot-password.tsx` | ForgotPassword | Password reset |
| `/otp` | `src/routes/(auth)/otp.tsx` | OTP | One-time password verification |
| `/401` | `src/routes/(errors)/401.tsx` | UnauthorizedError | Unauthorized error page |
| `/403` | `src/routes/(errors)/403.tsx` | ForbiddenError | Forbidden error page |
| `/404` | `src/routes/(errors)/404.tsx` | NotFoundError | Not found error page |
| `/500` | `src/routes/(errors)/500.tsx` | GeneralError | Server error page |
| `/503` | `src/routes/(errors)/503.tsx` | MaintenanceError | Maintenance error page |

## READ Paths

### 1. Dashboard (`/`)
```
Route: /_authenticated/index.tsx
  → Component: src/features/dashboard/index.tsx
    → Data: STATIC (hardcoded in component)
    → Sub-components: Overview, RecentSales, Analytics
    → Storage: None
```

### 2. Tasks (`/tasks`)
```
Route: /_authenticated/tasks/index.tsx
  → Component: src/features/tasks/index.tsx
    → Data: src/features/tasks/data/tasks.ts (faker-generated, 100 items)
    → Provider: TasksProvider (context for dialogs)
    → Table: TasksTable with filtering/pagination via URL search params
    → Storage: None (static data)
```

### 3. Users (`/users`)
```
Route: /_authenticated/users/index.tsx
  → Component: src/features/users/index.tsx
    → Data: src/features/users/data/users.ts (faker-generated, 500 items)
    → Provider: UsersProvider (context for dialogs)
    → Table: UsersTable with filtering/pagination via URL search params
    → Storage: None (static data)
```

### 4. Apps (`/apps`)
```
Route: /_authenticated/apps/index.tsx
  → Component: src/features/apps/index.tsx
    → Data: src/features/apps/data/apps.tsx (static app list)
    → Filtering: Local state + URL search params
    → Storage: None (static data)
```

### 5. Chats (`/chats`)
```
Route: /_authenticated/chats/index.tsx
  → Component: src/features/chats/index.tsx
    → Data: src/features/chats/data/convo.json (static conversations)
    → State: Local useState for selected user, search
    → Storage: None (static data)
```

### 6. Auth State
```
Store: src/stores/auth-store.ts
  → Zustand store with cookie persistence
  → Cookie key: "thisisjustarandomstring"
  → State: user object, accessToken
  → Used by: Route guards, UserAuthForm
```

## WRITE Paths

### 1. Sign In (`/sign-in`)
```
Form: src/features/auth/sign-in/components/user-auth-form.tsx
  → Validation: Zod schema (email, password)
  → Submit: Mock authentication (sleep 2s)
  → Storage: 
    - auth.setUser() → Zustand state
    - auth.setAccessToken() → Cookie via setCookie()
  → Redirect: to "/" or redirectTo param
```

### 2. Tasks CRUD (Dialogs)
```
Component: src/features/tasks/components/tasks-dialogs.tsx
  → Provider: TasksProvider context
  → Actions: Create, Edit, Delete tasks
  → Storage: LOCAL STATE ONLY (no persistence)
  → Note: Changes are lost on refresh
```

### 3. Users CRUD (Dialogs)
```
Component: src/features/users/components/users-dialogs.tsx
  → Provider: UsersProvider context
  → Actions: Create, Edit, Delete, Invite users
  → Storage: LOCAL STATE ONLY (no persistence)
  → Note: Changes are lost on refresh
```

### 4. Settings Forms
```
Routes: /settings/account, /settings/appearance, etc.
  → Forms with validation
  → Storage: LOCAL STATE ONLY (no persistence)
```

## Data Types

### Task
```typescript
{
  id: string;           // "TASK-1234"
  title: string;
  status: 'todo' | 'in progress' | 'done' | 'canceled' | 'backlog';
  label: 'bug' | 'feature' | 'documentation';
  priority: 'low' | 'medium' | 'high';
  createdAt: Date;
  updatedAt: Date;
  assignee: string;
  description: string;
  dueDate: Date;
}
```

### User
```typescript
{
  id: string;           // UUID
  firstName: string;
  lastName: string;
  username: string;
  email: string;
  phoneNumber: string;
  status: 'active' | 'inactive' | 'invited' | 'suspended';
  role: 'superadmin' | 'admin' | 'cashier' | 'manager';
  createdAt: Date;
  updatedAt: Date;
}
```

### AuthUser
```typescript
{
  accountNo: string;
  email: string;
  role: string[];
  exp: number;          // Expiry timestamp
}
```

## Storage Summary

| Feature | Storage Type | Key/Location |
|---------|--------------|--------------|
| Auth Token | Cookie | "thisisjustarandomstring" |
| Auth User | Zustand (memory) | useAuthStore.auth.user |
| Tasks | Static file | src/features/tasks/data/tasks.ts |
| Users | Static file | src/features/users/data/users.ts |
| Apps | Static file | src/features/apps/data/apps.tsx |
| Chats | Static JSON | src/features/chats/data/convo.json |

## API Endpoints

**Currently: NONE** - This is a static demo application with no backend API.

All data is:
1. Generated at build time using faker.js
2. Stored in static files
3. Not persisted between page refreshes (except auth cookie)

## Testing Considerations

1. **Auth Flow**: Can test sign-in form → cookie storage → redirect
2. **Navigation**: All routes are accessible, protected routes check auth
3. **Data Display**: Tables, cards, charts render static data
4. **Filtering**: URL search params control filtering/pagination
5. **Dialogs**: CRUD dialogs open/close but don't persist changes
6. **Theme**: Theme switching works (likely localStorage)
